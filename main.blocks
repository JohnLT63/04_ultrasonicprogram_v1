<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="?`AWDeLRpTlCI,xU7{4w">address</variable><variable id="8VnNd#Nj0[4Ib$Ffrt2K">length</variable><variable id="1]9fpQyX|-+Li9YN24.;">RangeL</variable><variable id="N=%Ac,f,F-cHZ7F1,[HJ">DataL</variable><variable id="Q+Lug?/utN.!R|`#znR!">DataH</variable><variable id="|_9X(0{`]?v^T2bGVi44">SonicTime</variable><variable id="/t!=qH*[T~b(UJkwz%Me">buff</variable><variable id=":gML_Mj?1[H5zC7~bRU2">sound</variable></variables><comment id="v?9O?r9Wm5S-R#*Spd4$" x="0" y="0" w="745" h="165">04_UltrasonicProgram_v1

マイコンロボット向け　超音波センサー用プログラム
This is the ultrasonic sensor program for the Tamiya Microcomputer Robot.
  </comment><block type="pxt-on-start" id="fGh?S_HB_7S,)y7S1_Ju" x="-4" y="198"><comment pinned="false" h="86" w="354">プログラムが動き出したときに一度だけ行う
Runs once when the program starts.</comment><statement name="HANDLER"><block type="device_analog_set_pitch_pin" id="DsrVE(^rj`DvOvLJa-wW"><comment pinned="false" h="101" w="225">音の初期設定
Initial sound setting</comment><value name="name"><shadow type="analog_pin_shadow" id=":s2tVvKMb!MDf]D-9TAE"><field name="pin">AnalogPin.P8</field></shadow></value><next><block type="device_start_melody" id="d*hZ!m*tRQy5,MVH:vc1"><field name="options">MelodyOptions.Once</field><value name="melody"><shadow type="device_builtin_melody" id="{eMudIFf8YD,hf{7s}(y"><field name="melody">Melodies.BaDing</field></shadow></value><next><block type="basic_show_icon" id="WR}:~^$2k6K^k8#Sl(1V"><field name="i">IconNames.SmallSquare</field><next><block type="basic_show_icon" id="lDQ^*!GRN_{L5Y]ar/J:"><field name="i">IconNames.Square</field><next><block type="device_pause" id="@V4W@%{~sydE$m|Ha;:m"><value name="pause"><shadow type="timePicker" id="COsOOx;Z0{Yt:]j/]n#("><field name="ms">100</field></shadow></value><next><block type="device_print_message" id="RP`{%RYvSna{N;!,07)R"><comment pinned="false" h="93" w="288">P04を表示する(プログラムNo.4)
Shows P04 (Program no.4)</comment><value name="text"><shadow type="text" id="IM4fAH_ejjNzT%Z$PV$W"><field name="TEXT">P04</field></shadow></value><next><block type="device_pause" id="KSS`j3Ai=4!gwf){0K:p"><value name="pause"><shadow type="timePicker" id="1|gD5@q$UiFGH`/wha*x"><field name="ms">500</field></shadow></value><next><block type="device_clear_display" id="5u7FQ6l*%5iGPoU(2bTG"></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="U%DL!x39{^z1HK@)_^QV" x="1213" y="233"><mutation name="I2C" functionid="~m$u/k#(Ab6j:X@2!e)u"></mutation><field name="function_name">I2C</field><comment pinned="false" h="104" w="330">センサー回路と通信する
Communicates with sensor circuit.</comment><statement name="STACK"><block type="variables_set" id="+7^dUE|~SKVZ2$29m+vy"><field name="VAR" id="N=%Ac,f,F-cHZ7F1,[HJ">DataL</field><comment pinned="false" h="95" w="201">データをリセットする
Resets data.</comment><value name="VALUE"><shadow type="math_number" id="ObyUGz.^Vrz#?^`.g[89"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="Lyb=b$v!m|ns`U==;5%="><field name="VAR" id="Q+Lug?/utN.!R|`#znR!">DataH</field><comment pinned="false" h="90" w="201">データをリセットする
Resets data.</comment><value name="VALUE"><shadow type="math_number" id=",e45]V@*EgGht:rvKCmR"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="X.ZU3jt)(=ibE70C$C-x"><field name="VAR" id="|_9X(0{`]?v^T2bGVi44">SonicTime</field><comment pinned="false" h="103" w="244">通信開始時刻を保存する
Records data start time.</comment><value name="VALUE"><shadow type="math_number" id="`2HkB#p:R,3mD?%ZdJ#V"><field name="NUM">0</field></shadow><block type="device_get_running_time" id="C=x3SJVHI[p$%~H,)4{A"></block></value><next><block type="device_while" id="*H[#*c%zdjA!s]WhQN`c"><comment pinned="false" h="142" w="468">データを取得する　または　50ミリ秒以上経過するまで
通信を繰り返す
Keeps communication open while data is received or until 50 milliseconds have passed.</comment><value name="COND"><shadow type="logic_boolean" id="~bi]5}W*ET3P1A::?dp#"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="]tHkx}N-32uUwJ1K5.Ra"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="V0*h#~SqW@Zb=`F$0M:^"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="|T#.=fbQe$CgeM|Tz+Mr"><field name="OP">AND</field><value name="A"><shadow type="logic_boolean" id="g)eF]1nSK4F@kc0a,oaE"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="kh=#Ay`|QQ4%5Q6klWmI"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id=")1n|t$h/s5kPLy(n{fQx"><field name="NUM">0</field></shadow><block type="variables_get" id="e/5WQ%1~+s?}1_JJBDq#"><field name="VAR" id="Q+Lug?/utN.!R|`#znR!">DataH</field></block></value><value name="B"><shadow type="math_number" id="d^aY,{:Pm74At~7KPnDM"><field name="NUM">0</field></shadow></value></block></value><value name="B"><shadow type="logic_boolean" id="[Uf:7yw*dfkrpi121;dI"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="pC+#]-j7#:7xAb:j,V=d"><field name="OP">EQ</field><value name="A"><shadow type="math_number" id="(-^;f#9r[C~._5Q}l2Eh"><field name="NUM">0</field></shadow><block type="variables_get" id="db8#i7NqOciW/Cw44M1]"><field name="VAR" id="N=%Ac,f,F-cHZ7F1,[HJ">DataL</field></block></value><value name="B"><shadow type="math_number" id="9QB~|}znK8,.,i1|2LN2"><field name="NUM">0</field></shadow></value></block></value></block></value><value name="B"><shadow type="logic_boolean" id="/~QS@YtwcViFe3L7Wxxe"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="WYq1%EDw@BkH^Q6Ml)4b"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="E]gt/Ak?(pU)#yjU.2bB"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="5mWyNFdVHaHOvA=/3`?+"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="5tO%aQZrI8tEZtPFiYnm"><field name="NUM">0</field></shadow><block type="device_get_running_time" id="$~|fc(b)jm]gGaGv6!dN"></block></value><value name="B"><shadow type="math_number" id="SMtUIG7g{6-Wg=g@I]9."><field name="NUM">0</field></shadow><block type="variables_get" id="6u5RdGl9S!5oI^`q-;+u"><field name="VAR" id="|_9X(0{`]?v^T2bGVi44">SonicTime</field></block></value></block></value><value name="B"><shadow type="math_number" id="UI@8xgqvmS}gU#=RX6$C"><field name="NUM">50</field></shadow></value></block></value></block></value><statement name="DO"><block type="i2c_writenumber" id="B2kE6)|~LYJzWAfD2ypA"><field name="format">NumberFormat.UInt8BE</field><comment pinned="false" h="96" w="423">超音波センサーに使用開始の指示を出す
Sends start command to Ultrasonic Sensor.</comment><value name="address"><block type="variables_get" id="5Ba,t`aD=~d6M4BpC=i1"><field name="VAR" id="?`AWDeLRpTlCI,xU7{4w">address</field></block></value><value name="value"><shadow type="math_number" id="$keqXzMDz7J@)=`f82iX"><field name="NUM">51</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id="3[F*}=~}6dS$s;+a)K[1"><field name="BOOL">FALSE</field></shadow></value><next><block type="variables_set" id="m%1.=EN+8XfY%jrn0f*l"><field name="VAR" id="/t!=qH*[T~b(UJkwz%Me">buff</field><comment pinned="false" h="94" w="248">応答データを取得する
Receives data response.</comment><value name="VALUE"><shadow type="math_number" id="KC-0`Uw2f5Q@d.TDT)_?"><field name="NUM">0</field></shadow><block type="pins_i2c_readnumber" id="fzDPLD2UIgiqF5R]PRKr"><field name="format">NumberFormat.UInt8BE</field><value name="address"><block type="variables_get" id="aszLWh|bF*3B8)B^DxJZ"><field name="VAR" id="?`AWDeLRpTlCI,xU7{4w">address</field></block></value><value name="repeat"><shadow type="logic_boolean" id="gL6j5myo27dSzqa{@J:*"><field name="BOOL">FALSE</field></shadow></value></block></value><next><block type="controls_if" id="w91LdupdQ/K-lUiu)m|Q"><value name="IF0"><shadow type="logic_boolean" id="3jUb{mUeH_!x6GffwiJA"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="TkehuX/b+r@w2AYG%=to"><field name="OP">EQ</field><comment pinned="false" h="95" w="253">応答データが1なら
If data response is 1...</comment><value name="A"><shadow type="math_number" id="PB}WMk_Fp/;^zO9Fz6S1"><field name="NUM">0</field></shadow><block type="variables_get" id="RnZ;S{H(zYTT2X60wg]1"><field name="VAR" id="/t!=qH*[T~b(UJkwz%Me">buff</field></block></value><value name="B"><shadow type="math_number" id="y@`-H3r[PQavK2w8Q]T:"><field name="NUM">1</field></shadow></value></block></value><statement name="DO0"><block type="device_pause" id="`ZQ,mI7oZMZ$Ls%zv[PW"><value name="pause"><shadow type="timePicker" id="$@BQbW3-_YCKJXoz%_!["><field name="ms">6</field></shadow></value><next><block type="i2c_writenumber" id="IzI:LU_C+lC3ldAP=HX8"><field name="format">NumberFormat.UInt8BE</field><comment pinned="false" h="101" w="332">確認用データを送るように指示を出す
Requests confirmation data.</comment><value name="address"><block type="variables_get" id=";k,_jq.g)Ly)Cs83]F}`"><field name="VAR" id="?`AWDeLRpTlCI,xU7{4w">address</field></block></value><value name="value"><shadow type="math_number" id="B6)Eq.6+W4c[r0Hu8vjn"><field name="NUM">16</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id=")aaa{N$m@m%z40ELm0pZ"><field name="BOOL">FALSE</field></shadow></value><next><block type="variables_set" id="}67{_1wESJ**^=DT/lDc"><field name="VAR" id="/t!=qH*[T~b(UJkwz%Me">buff</field><comment pinned="false" h="97" w="287">確認用データを取得する
Receives confirmation data.</comment><value name="VALUE"><shadow type="math_number" id="M{rCb5VFH+8+(5a$sU:Q"><field name="NUM">0</field></shadow><block type="pins_i2c_readnumber" id="Goo{.Ag/p$/^r4?HJ0-y"><field name="format">NumberFormat.UInt8BE</field><value name="address"><block type="variables_get" id="tQs39_,ah{PrE(oNEZ}j"><field name="VAR" id="?`AWDeLRpTlCI,xU7{4w">address</field></block></value><value name="repeat"><shadow type="logic_boolean" id="8m-[gPsa;h:@@{={5zJN"><field name="BOOL">FALSE</field></shadow></value></block></value><next><block type="device_pause" id="{Pz;)9?ch8QV:u)wCQ~5"><value name="pause"><shadow type="timePicker" id="qgWK5rJ.p-Z4rRf#U.Oi"><field name="ms">1</field></shadow></value><next><block type="i2c_writenumber" id="lEBa!E:u56C]oDpi=t_X"><field name="format">NumberFormat.UInt8BE</field><comment pinned="false" h="116" w="427">反射時間(上位桁)を送るように指示を出す
Requests time taken (top section of the value) for signal to reflect.</comment><value name="address"><block type="variables_get" id="`T4@[%V:[5@BZ)1L+GPy"><field name="VAR" id="?`AWDeLRpTlCI,xU7{4w">address</field></block></value><value name="value"><shadow type="math_number" id="jY/z*N5_Dhmb9T@S?#(1"><field name="NUM">15</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id="11W*+:%7SMCUF5n{)E~x"><field name="BOOL">FALSE</field></shadow></value><next><block type="variables_set" id="*Ft-?sWV5ughek^oYBE$"><field name="VAR" id="Q+Lug?/utN.!R|`#znR!">DataH</field><comment pinned="false" h="100" w="485">反射時間(上位桁)を取得する
Receives data on time taken for signal to reflect.</comment><value name="VALUE"><shadow type="math_number" id=";:h/!82;bEv/-Y_vnO4:"><field name="NUM">0</field></shadow><block type="pins_i2c_readnumber" id="$[MoDCe?^P8W97ClZ[JZ"><field name="format">NumberFormat.UInt8BE</field><value name="address"><block type="variables_get" id="%,#5)p^!=wq@eX!IXan_"><field name="VAR" id="?`AWDeLRpTlCI,xU7{4w">address</field></block></value><value name="repeat"><shadow type="logic_boolean" id=")njSgQZ*R3Y+;WxTMv8z"><field name="BOOL">FALSE</field></shadow></value></block></value><next><block type="device_pause" id="CWeRW^r;@#CsKvJ6mrY#"><value name="pause"><shadow type="timePicker" id=")$X:D)G5fu+]IN)m.=x#"><field name="ms">1</field></shadow></value><next><block type="i2c_writenumber" id="l`MVNRWf[TaRZ/p%#,Mr"><field name="format">NumberFormat.UInt8BE</field><comment pinned="false" h="111" w="458">反射時間(下位桁)を送るように指示を出す
Requests time taken (bottom section of the value) for signal to reflect.</comment><value name="address"><block type="variables_get" id="~^Sgb;d+ez6T4:6whj]*"><field name="VAR" id="?`AWDeLRpTlCI,xU7{4w">address</field></block></value><value name="value"><shadow type="math_number" id="qZyND(?K#8O{Ts;VYzL:"><field name="NUM">14</field></shadow></value><value name="repeat"><shadow type="logic_boolean" id=")*BUQv}1_HB$Oc6!f0mT"><field name="BOOL">FALSE</field></shadow></value><next><block type="variables_set" id="c=.6V8;/X3z,P#WOzI1-"><field name="VAR" id="N=%Ac,f,F-cHZ7F1,[HJ">DataL</field><comment pinned="false" h="93" w="473">反射時間(下位桁)を取得する
Receives data on time taken for signal to reflect.</comment><value name="VALUE"><shadow type="math_number" id="@;^/;97EpM][}$}ScQ^H"><field name="NUM">0</field></shadow><block type="pins_i2c_readnumber" id="x3U`l!}lH:K[.zCX*Bd@"><field name="format">NumberFormat.UInt8BE</field><value name="address"><block type="variables_get" id=".7O#TER?x~C:B$kSOFff"><field name="VAR" id="?`AWDeLRpTlCI,xU7{4w">address</field></block></value><value name="repeat"><shadow type="logic_boolean" id="_ovzm2i:QfP08ugtp[6i"><field name="BOOL">FALSE</field></shadow></value></block></value><next><block type="controls_if" id="JfYc78bD#E6T?ikFFz-T"><value name="IF0"><shadow type="logic_boolean" id="!tf/CRwbvXyu=Bn_D{GK"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="?!2S+Nf5szxDl^nG}b9u"><field name="OP">NEQ</field><comment pinned="false" h="94" w="330">取得したデータが間違っているなら
If received data is false...</comment><value name="A"><shadow type="math_number" id="_`_hXpHpz{CHJ/uv_Io~"><field name="NUM">0</field></shadow><block type="variables_get" id="M#/chXuB(-TB[*WFpw6B"><field name="VAR" id="/t!=qH*[T~b(UJkwz%Me">buff</field></block></value><value name="B"><shadow type="math_number" id="IVA1ko^ko|e:CekO0Kyx"><field name="NUM">0</field></shadow><block type="math_constrain_value" id="i9H2HI.b(+`x?+o._RYi"><value name="value"><block type="math_arithmetic" id="{+Ep_jg0NEo/}Sr+G6p#"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="U@|Zxx:/E:/`900t46#5"><field name="NUM">0</field></shadow><block type="variables_get" id="2P8S|]+b8JX:Lk~Mxz(D"><field name="VAR" id="Q+Lug?/utN.!R|`#znR!">DataH</field></block></value><value name="B"><shadow type="math_number" id="1Y!4ZFjHUN}**AifH9;T"><field name="NUM">0</field></shadow><block type="variables_get" id="nHv@q@T^8a.UU(+7g,:O"><field name="VAR" id="N=%Ac,f,F-cHZ7F1,[HJ">DataL</field></block></value></block></value><value name="low"><shadow type="math_number" id="Fk?LbZ4p-i(zrItsdRrW"><field name="NUM">0</field></shadow></value><value name="high"><shadow type="math_number" id="}Cgs[O4_LLkJ8Flg#6QM"><field name="NUM">255</field></shadow></value></block></value></block></value><statement name="DO0"><block type="variables_set" id="2R*u{$op^l`Cak[%iz-`"><field name="VAR" id="Q+Lug?/utN.!R|`#znR!">DataH</field><comment pinned="false" h="106" w="203">データをリセットする
Resets data.</comment><value name="VALUE"><shadow type="math_number" id="%pZFl}x|bH+MGiEDEIyF"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="[$BkGS=6,H!w*rpg#c6m"><field name="VAR" id="N=%Ac,f,F-cHZ7F1,[HJ">DataL</field><comment pinned="false" h="99" w="203">データをリセットする
Resets data.</comment><value name="VALUE"><shadow type="math_number" id=".50(N-~p4[Re^8gmL$Xw"><field name="NUM">0</field></shadow></value></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></next></block></next></block></statement><next><block type="variables_set" id="fu.e(bh:./h#az#X!HXM"><field name="VAR" id="8VnNd#Nj0[4Ib$Ffrt2K">length</field><comment pinned="false" h="104" w="697">反射時間から反射距離を計算する
Calculates distance to obstacle from time taken for signal to reflect.</comment><value name="VALUE"><shadow type="math_number" id="~#UG*D?pWc@Ip!Xhf;JT"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="j6p6A8k7HPK]Ut9$eFC="><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="OU_RddFClro1ZQ4vU0q9"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="cB#?RL@^TjQ5nF7T;cu)"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="SfvWckKRy_05:M(mT#ag"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="P-[wxr2shul=Ou3Kygo3"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="gMqm[DB[Le8%9d7RvEQP"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="SyrhDQLXSq.dIs!BZ(})"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id=";Dm=5%jj0$NHBnU,nQ3v"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="U,g+f7G=$*He68|bX`pg"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="FTzF=]^H~PhaU71;L*.R"><field name="NUM">0</field></shadow><block type="variables_get" id="YfYKGu~#GP%:No0J.wRY"><field name="VAR" id="Q+Lug?/utN.!R|`#znR!">DataH</field></block></value><value name="B"><shadow type="math_number" id="#sTOR2:{!m~bCM}Z6?eR"><field name="NUM">256</field></shadow></value></block></value><value name="B"><shadow type="math_number" id="]j*?RlznPA}7L];Clt%?"><field name="NUM">0</field></shadow><block type="variables_get" id="~3iqw{*!W//OkwSyLdfU"><field name="VAR" id="N=%Ac,f,F-cHZ7F1,[HJ">DataL</field></block></value></block></value><value name="B"><shadow type="math_number" id="DV{VKHp20Gp71-dxWkst"><field name="NUM">160</field></shadow></value></block></value><value name="B"><shadow type="math_number" id="`%3f|ZiGuCl{[hnH8REj"><field name="NUM">2</field></shadow></value></block></value><value name="B"><shadow type="math_number" id="qj/ZygZTJ{_#!c}fFc;s"><field name="NUM">0.315</field></shadow></value></block></value></block></next></block></next></block></next></block></next></block></statement></block><block type="device_forever" id="2suK!TBU/HMP%ak_^zmD" x="-5" y="730"><comment pinned="false" h="91" w="294">繰り返し行う
Block repeats continuously.</comment><statement name="HANDLER"><block type="function_call" id="FAxrXJH;mtH7lNWtJeck"><mutation name="ULTRASONIC1" functionid="+kOtGrzs1O:ivIq/qRVT"></mutation><comment pinned="false" h="97" w="255">超音波センサーを使う
Runs Ultrasonic Sensor.</comment><next><block type="device_show_number" id="du817^y:=+VE)!t]6o|O"><value name="number"><shadow type="math_number" id="L4b)4zBlx=1R3;)#Z@2W"><field name="NUM">0</field></shadow><block type="variables_get" id="ieFA@e:q/9WtTRW#6M`~"><field name="VAR" id="1]9fpQyX|-+Li9YN24.;">RangeL</field></block></value><next><block type="variables_set" id="rA~xtr)!v_=J*0{Yx+Ru"><field name="VAR" id=":gML_Mj?1[H5zC7~bRU2">sound</field><value name="VALUE"><shadow type="math_number" id="|9{C}Fg|%6D(;oEV#1@h"><field name="NUM">0</field></shadow><block type="math_map" id="_Zws/_^e_z2Eu]oAb1r["><comment pinned="false" h="103" w="565">超音波センサーのデータ(20～500)を音程(131～988)に変換する
Convert ultrasonic sensor data (20～500) to pitch (131～988).</comment><value name="value"><shadow type="math_number" id="vsC,}agQ73j`7LE9T(uK"><field name="NUM">0</field></shadow><block type="variables_get" id="B1CUB,;FJBc1m$,lH$dI"><field name="VAR" id="1]9fpQyX|-+Li9YN24.;">RangeL</field></block></value><value name="fromLow"><shadow type="math_number" id="zbQrSjmreqytm?!/dY0x"><field name="NUM">20</field></shadow></value><value name="fromHigh"><shadow type="math_number" id="Ac6@M;:}?H/rEERau3@4"><field name="NUM">500</field></shadow></value><value name="toLow"><shadow type="math_number" id="v*cs~{.Cl9Nu:iySMZJC"><field name="NUM">131</field></shadow></value><value name="toHigh"><shadow type="math_number" id="sS7sLn79[sR6$mEyDD%L"><field name="NUM">988</field></shadow></value></block></value><next><block type="device_play_note" id="2mC*/Dla.#^%Z.ab+IUR"><value name="note"><shadow type="device_note" id="9^dUNBV}5/xF!mwB?=Y@"><field name="name">262</field></shadow><block type="variables_get" id="uD#dF~kEXKp!zf+}mioL"><field name="VAR" id=":gML_Mj?1[H5zC7~bRU2">sound</field></block></value><value name="duration"><shadow type="device_beat" id="9]T*,pV?w8md^3yw5FL7"><field name="fraction">BeatFraction.Quarter</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="b(bp{FM8!To^*19xiyP}" x="167" y="1300"><mutation name="ULTRASONIC1" functionid="+kOtGrzs1O:ivIq/qRVT"></mutation><field name="function_name">ULTRASONIC1</field><comment pinned="false" h="143" w="765">超音波センサーを使う
(超音波の反射時間から障害物までの距離を計算する)
Uses Ultrasonic Sensor
(calculates distance to obstacle from time taken for signal to reflect.)</comment><data>0</data><statement name="STACK"><block type="variables_set" id="fQ`:S+qX,GiCL;HFs=w!"><field name="VAR" id="?`AWDeLRpTlCI,xU7{4w">address</field><comment pinned="false" h="102" w="276">超音波センサーを選択する
Selects Ultrasonic Sensor.</comment><value name="VALUE"><shadow type="math_number" id="t2`$z}o,+E*`.GAbh*ca"><field name="NUM">44</field></shadow></value><next><block type="function_call" id="+6TxT9#wR+LcO]V09Xni"><mutation name="I2C" functionid="~m$u/k#(Ab6j:X@2!e)u"></mutation><comment pinned="false" h="103" w="335">センサー回路と通信する
Communicates with sensor circuit.</comment><next><block type="controls_if" id="{8Aa*-fhu8/9J240Fd,v"><mutation else="1"></mutation><comment pinned="false" h="98" w="331">超音波センサーのデータを補正する
Revises Ultrasonic Sensor data</comment><value name="IF0"><shadow type="logic_boolean" id="T6EUDE.U4H(@iRf2ZS~3"><field name="BOOL">TRUE</field></shadow><block type="logic_operation" id="(H)t3i4YqRz0JO)/ka/4"><field name="OP">AND</field><comment pinned="false" h="94" w="505">超音波センサーのデータが0~1000mmなら
If Ultrasonic Sensor data is between 0 and 1,000mm</comment><value name="A"><shadow type="logic_boolean" id=",#ko+LBE~@f*/WN_!c|h"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="o;;E$$tg/_9nMp0~:NW="><field name="OP">LTE</field><value name="A"><shadow type="math_number" id="+CO4fGNM76QjJUiO:pWg"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number" id="Y{E~qcJrbXtZitT-JmXz"><field name="NUM">0</field></shadow><block type="variables_get" id="E_I9!q2.kvO=L(75^3s~"><field name="VAR" id="8VnNd#Nj0[4Ib$Ffrt2K">length</field></block></value></block></value><value name="B"><shadow type="logic_boolean" id="ZJmMW$vJ-]u7)hM#q-.["><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="w^;vZ*LRq03=(DFT-:sU"><field name="OP">LTE</field><value name="A"><shadow type="math_number" id="@X.?F#gfJ:i}J:`V;g.3"><field name="NUM">0</field></shadow><block type="variables_get" id="c;j+,9(,29kCGV_{:YAb"><field name="VAR" id="8VnNd#Nj0[4Ib$Ffrt2K">length</field></block></value><value name="B"><shadow type="math_number" id="CD%NW]QDO_JvsRh5q_3P"><field name="NUM">1000</field></shadow></value></block></value></block></value><statement name="DO0"><block type="variables_set" id="H;(rK/f[;nx43H={ZO0F"><field name="VAR" id="1]9fpQyX|-+Li9YN24.;">RangeL</field><comment pinned="false" h="100" w="406">超音波センサーのデータを四捨五入する
Rounds up/down Ultrasonic Sensor data.</comment><value name="VALUE"><shadow type="math_number" id="he{T+()+:+1$~X5d{)n="><field name="NUM">0</field></shadow><block type="math_js_round" id="K(ge;spgzjSmbrV~8bgP"><field name="OP">round</field><value name="ARG0"><shadow type="math_number" id="d#/9R.6%c_Nc9{RLRqvJ"><field name="NUM">0</field></shadow><block type="variables_get" id="R3)yOf;h=:b_B[z@:.~9"><field name="VAR" id="8VnNd#Nj0[4Ib$Ffrt2K">length</field></block></value></block></value></block></statement><statement name="ELSE"><block type="variables_set" id="RI*$Ng0:mOgoVgHmg|,Y"><field name="VAR" id="1]9fpQyX|-+Li9YN24.;">RangeL</field><comment pinned="false" h="103" w="363">超音波センサーのデータを0にリセットする
Resets Ultrasonic Sensor data to 0.</comment><value name="VALUE"><shadow type="math_number" id="h612zQ{m-2Dt.ru*d9I."><field name="NUM">0</field></shadow></value></block></statement></block></next></block></next></block></statement></block></xml>